(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{364:function(e,a,r){e.exports=r.p+"assets/img/nvram.c97ef040.png"},492:function(e,a,r){"use strict";r.r(a);var t=r(25),o=Object(t.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"nvram-emulada"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nvram-emulada"}},[e._v("#")]),e._v(" NVRAM Emulada")]),e._v(" "),t("p",[e._v("Esta sección es para los que no tienen NVRAM nativa. El hardware más común que tiene NVRAM incompatible con macOS es X99 y ciertos chipsets de la serie X299:")]),e._v(" "),t("ul",[t("li",[e._v("X99")]),e._v(" "),t("li",[e._v("X299")])]),e._v(" "),t("p",[e._v("Para B360, B365, H310, H370, Z390, usa "),t("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-PMC"),t("OutboundLink")],1),e._v(" y ponlo en EFI/OC/ACPI y config.plist -> ACPI -> Add. Para más información de crear y compilar las SSDTs, dirígete a "),t("a",{attrs:{href:"https://dortania.github.io/Getting-Started-With-ACPI/",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("Getting started with ACPI")]),t("OutboundLink")],1)]),e._v(" "),t("p",[t("strong",[e._v("Nota")]),e._v(": CPUs de la 10a generación no necesitan esta SSDT")]),e._v(" "),t("h2",{attrs:{id:"eliminar-la-basura-de-clover"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eliminar-la-basura-de-clover"}},[e._v("#")]),e._v(" Eliminar la basura de Clover")]),e._v(" "),t("p",[e._v("So some may not have noticed pero Clover ha instalado scripts RC en macOS para emulación de NVRAM. Esto es un problema ya que crea conflicto con la emulación de OpenCore.")]),e._v(" "),t("p",[e._v("Archivos que eliminar:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("/Volumes/EFI/EFI/CLOVER/drivers64UEFI/EmuVariableUefi-64.efi")])]),e._v(" "),t("li",[t("code",[e._v("/Volumes/EFI/nvram.plist")])]),e._v(" "),t("li",[t("code",[e._v("/etc/rc.clover.lib")])]),e._v(" "),t("li",[t("code",[e._v("/etc/rc.boot.d/10.save_and_rotate_boot_log.local")])]),e._v(" "),t("li",[t("code",[e._v("/etc/rc.boot.d/20.mount_ESP.local")])]),e._v(" "),t("li",[t("code",[e._v("/etc/rc.boot.d/70.disable_sleep_proxy_client.local.disabled")])]),e._v(" "),t("li",[t("code",[e._v("/etc/rc.shutdown.d/80.save_nvram_plist.local​")])])]),e._v(" "),t("p",[e._v("Si estas carpetas son vacias, elimínalas también:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("/etc/rc.boot.d")])]),e._v(" "),t("li",[t("code",[e._v("/etc/rc.shutdown.d​")])])]),e._v(" "),t("h2",{attrs:{id:"verificar-si-la-nvram-funciona"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verificar-si-la-nvram-funciona"}},[e._v("#")]),e._v(" Verificar si la NVRAM funciona")]),e._v(" "),t("p",[e._v("Para empezar, abre la terminal y corre estás líneas una a una:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" -s\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" nvram -c\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" nvram "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("myvar")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("test\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exit")]),e._v("\n")])])]),t("p",[e._v("Ahora reinicía y corre esto:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("nvram -p "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" -i myvar\n")])])]),t("p",[e._v("Si no returns nada, tu NVRAM no funciona. Si una línea con "),t("code",[e._v("myvar test")]),e._v(" returns, la NVRAM funciona.")]),e._v(" "),t("p",[e._v("Nota: "),t("code",[e._v("nvram -c")]),e._v(" requiere la SIP desactivada, un alternativo resetear la NVRAM en el menú de boot. Para esto necesitas "),t("code",[e._v("Misc -> Security -> AllowNvramReset -> YES")])]),e._v(" "),t("h2",{attrs:{id:"activar-la-nvram-emulada-con-nvram-plist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#activar-la-nvram-emulada-con-nvram-plist"}},[e._v("#")]),e._v(" Activar la NVRAM emulada (con nvram.plist)")]),e._v(" "),t("p",[e._v("Para activar la NVRAM emulada, necesitas puestan estas 3 cosas:")]),e._v(" "),t("p",[t("img",{attrs:{src:r(364),alt:""}})]),e._v(" "),t("p",[e._v("Dentro de la config.plist:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Booter")]),e._v(":\n"),t("ul",[t("li",[t("code",[e._v("DisableVariableWrite")]),e._v(": "),t("code",[e._v("NO")])])])]),e._v(" "),t("li",[t("strong",[e._v("Misc -> Security")]),e._v(":\n"),t("ul",[t("li",[t("code",[e._v("ExposeSensitiveData")]),e._v(": "),t("code",[e._v("0x3")])])])]),e._v(" "),t("li",[t("strong",[e._v("NVRAM")]),e._v(":\n"),t("ul",[t("li",[t("code",[e._v("LegacyEnable")]),e._v(": "),t("code",[e._v("YES")])]),e._v(" "),t("li",[t("code",[e._v("LegacyOverwrite")]),e._v(": "),t("code",[e._v("YES")])]),e._v(" "),t("li",[t("code",[e._v("LegacySchema")]),e._v(": variables de NVRAM puestas(OpenCore compara esta a las variables presente en nvram.plist)")]),e._v(" "),t("li",[t("code",[e._v("WriteFlash")]),e._v(": "),t("code",[e._v("YES")])])])])]),e._v(" "),t("p",[e._v("Dentro tu EFI:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("OpenRuntime.efi")]),e._v(" driver(necesario para que suspensión, shutdown y otros servicios funcionen correctamente")])]),e._v(" "),t("p",[e._v("Ahora descarga la "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("'LogoutHook.command'"),t("OutboundLink")],1),e._v("(Dentro "),t("code",[e._v("/Utilities/LogoutHook/")]),e._v(") y guardarla somewhere safe (p.ej. en tu user directory, as shown below):")]),e._v(" "),t("p",[t("code",[e._v("/Users/(tu username)/LogoutHook/LogoutHook.command")])]),e._v(" "),t("p",[e._v("Abre la terminal y corre lo siguiente:")]),e._v(" "),t("p",[t("code",[e._v("sudo defaults write com.apple.loginwindow LogoutHook /Users/(your username)/LogoutHook/LogoutHook.command")])]),e._v(" "),t("p",[e._v("¡Y voila! Tienes NVRAM emulada!")]),e._v(" "),t("p",[e._v("Ten en cuentra que esto requiere que la command "),t("code",[e._v("nvram")]),e._v(" command sea compatible con el parámetro "),t("code",[e._v("-x")]),e._v(" para funcionar correctamente, y no es disponible en y macOS 10.12 y anterior. Si vas a instalar macOS 10.12 o anterior, tienes que copiar "),t("code",[e._v("nvram.mojave")]),e._v(" a la misma carpeta que "),t("code",[e._v("LogoutHook.command")]),e._v(", que arregla esto por correr esta sin la command "),t("code",[e._v("nvram")]),e._v(" del sistema.")]),e._v(" "),t("p",[e._v("Otra cosa que notar es que macOS solo puede read nvram.plist pero no puede write to nvram.plist unless running the shutdown process. Esto significa que correr el test de arriba no funciona")])])}),[],!1,null,null,null);a.default=o.exports}}]);